import{p as n,au as t,av as e,aw as r,e as a,ax as o,B as i}from"./main.js";const s={created:10,started:20,aborted:25,mate:30,resign:31,timeout:33,draw:34,outoftime:35,cheat:36,noStart:37,unknownFinish:38,variantEnd:60};function u(n){return n.id>=s.aborted}var c={ids:s,started:function(n){return n.game.status.id>=s.started},finished:function(n){return n.game.status.id>=s.mate},aborted:function(n){return n.game.status.id===s.aborted},resigned:function(n){return n.game.status.id===s.resign},toLabel:function(t,e,r){switch(t){case"started":return n("playingRightNow");case"aborted":return n("gameAborted");case"mate":return"";case"resign":return n("white"===e?"blackResigned":"whiteResigned");case"timeout":switch(e){case"white":return n("blackLeftTheGame");case"black":return n("whiteLeftTheGame");default:return n("draw")}case"draw":return n("draw");case"outoftime":return n("timeOut");case"noStart":return("white"===e?"Black":"White")+" didn't move";case"unknownFinish":return n("finished");case"cheat":return"Cheat detected";case"variantEnd":return"breakthrough"===r?"Promotion":"Variant ending";default:return t}}};function f(n){return!n||0===n.length}function d(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}function m(n){return((n=Math.max(Math.min(Math.round(n/10)/10,99),-99))>0?"+":"")+n}function p(n){const t=n.server,e=n.client;return t?e&&(e.nodes>5e6||void 0!==e.win&&(void 0===t.win||Math.abs(e.win)<Math.abs(t.win)))?e:t:e}function g(n){return"synthetic"===n.game.id}function l(n){n&&requestAnimationFrame((()=>{const t=n.querySelector(".current");n.scrollTop=t?t.offsetTop-n.offsetHeight/2+t.offsetHeight/2:0}))}function h(n){return Math.floor((n-1)/2)+1}function w(n,e){return n.san?h(n.ply)+(n.ply%2==1?".":"...")+" "+(e?t(n.san):n.san):"Initial position"}function k(n){return n.split(",").length+1}function y(n,t){switch(n){case"standard":case"fromPosition":return k(t)<=0;default:return!1}}function b(n,t){switch(n){case"standard":case"fromPosition":return k(t)<=0;default:return!1}}function v(n){return void 0!==n}function x(n){return n%2==0?"white":"black"}function O(n,t){return n.depth>t.depth||n.depth===t.depth&&n.nodes>t.nodes}const T=["standard","antidraughts","breakthrough","fromPosition","frisian","frysk"];function M(n){if(!n)return{};const t={};if("string"==typeof n)n.split(" ").forEach((n=>{t[n.slice(0,2)]=n.slice(2).match(/.{2}/g)}));else for(const e in n)t[e]=n[e].match(/.{2}/g);return t}function P(n){return"import"!==n.game.source&&n.game.status.id<c.ids.aborted}function L(n){return P(n)&&!n.player.spectator}function R(n){return L(n)&&n.game.player===n.player.color}function G(n){return!!n.tournament||!!n.simul||!!n.swiss}function S(n){return n.game.turns-(n.game.startedAtTurn||0)}function A(n){return P(n)&&!function(n){return S(n)>1}(n)&&!G(n)}function D(n){return!(!(P(n)&&n.takebackable&&!G(n)&&S(n)>1)||n.player.proposingTakeback||n.opponent.proposingTakeback)}function E(n){return P(n)&&n.game.turns>=2&&!n.player.offeringDraw&&!n.opponent.offeringDraw&&!n.opponent.ai&&(void 0===n.drawLimit||n.drawLimit>0&&n.game.turns>=2*n.drawLimit)}function F(n){return n.tournament&&n.tournament.berserkable&&L(n)&&S(n)<2}function N(n){return P(n)&&!A(n)}function V(n){return!n.opponent.ai&&n.clock&&n.opponent.isGone&&N(n)}function j(n){return L(n)&&n.moretimeable&&!G(n)&&(!!n.clock||!!n.correspondence&&n.correspondence[n.opponent.color]<n.correspondence.increment-3600)}function q(n){return"frisian"!==n.game.variant.key&&"frysk"!==n.game.variant.key}function B(n){return function(n){return"import"===n.game.source}(n)||c.finished(n)}function H(n){return-1!==a.analyse.supportedVariants.indexOf(n.game.variant.key)&&P(n)&&(!n.clock||!L(n))}function I(n){return B(n)&&S(n)>4&&-1!==T.indexOf(n.game.variant.key)}function $(n,t){return n.player.color===t?n.player:n.opponent.color===t?n.opponent:void 0}function C(n,t,e){const r=$(n,t);r&&(e=e&&!r.ai,r.isGone=e,!e&&r.user&&(r.user.online=!0))}function z(n,t,e){const r=$(n,t);r&&(e=e||!!r.ai,r.onGame=e,e&&C(n,t,!1))}function J(n,t){return Math.floor((n.game.turns+("white"===t?1:0))/2)}function K(n){if(c.finished(n))switch(n.game.winner){case"white":return a.game.draughtsResult()?"2-0":"1-0";case"black":return a.game.draughtsResult()?"0-2":"0-1";default:return a.game.draughtsResult()?"1-1":"½-½"}return"*"}function Q(n){if(n.clock){const t=o(n.clock.initial);return(.25===t?"¼":.5===t?"½":.75===t?"¾":t.toString())+"+"+n.clock.increment}return n.correspondence?i("nbDays",n.correspondence.daysPerTurn):"∞"}function W(t){const a=t.game.offline?n("offline"):t.game.rated?n("rated"):n("casual"),o=t.game.perf&&e(t.game.perf),i=r(t.game.variant.key),s=o||i.tinyName||i.shortName||i.name||"?",u=Q(t);return"import"===t.game.source?"Import • Standard":`${u} • ${s} • ${a}`}function U(n){return"https://lidraughts.org/"+n.game.id}function X(n){return"https://lidraughts.org/"+n.game.id+"/"+n.orientation}function Y(n){return-1!==a.game.supportedVariants.indexOf(n.game.variant.key)}function Z(n){return-1!==a.game.supportedVariants.indexOf(n)}function _(n){return-1!==a.game.supportedPerfs.indexOf(n)}function nn(n){return P(n)&&!g(n)&&"correspondence"===n.game.speed}export{E as A,X as B,I as C,m as D,p as E,w as F,f as G,h as H,k as I,y as J,v as K,g as L,b as M,l as N,O,T as P,x as Q,d as R,Q as S,_ as T,V as a,B as b,F as c,P as d,R as e,u as f,c as g,nn as h,Z as i,A as j,D as k,K as l,j as m,$ as n,L as o,U as p,q,N as r,Y as s,W as t,H as u,J as v,M as w,S as x,C as y,z};

import{o as a,p as e,q as t,ao as s,m as n,z as o,I as r,s as i,h as c,ct as l,r as d,cu as u,ad as m,J as v,ag as b}from"./main.js";import{l as g}from"./layout-26cca27d.js";function h(e,t,s){return a("button",{className:`navigationButton ${t?"enabled":"disabled"}`,"data-icon":e,oncreate:o(s)})}function p(e){return a("tr",{className:"list_item"+(e.isUnread?" unread":""),key:e.id,oncreate:t((()=>n.set("/inbox/"+e.id)))},a("td",{className:"threadAuthor"}," ",e.author," "),a("td",{className:"threadName"}," ",e.name," "),a("td",{className:"threadDate"}," ",(o=e.updatedAt,s(new Date(o)))," "));var o}var N={oncreate:r,oninit(){i.createDefault();const a=b(null),e=b(!1),t=c((t=>{e(!0),l(t).then((t=>{a(t),e(!1),d()})).catch((()=>{e(!1),d()}))}),1e3);u().then((e=>{a(e),d()})).catch(m),this.ctrl={threads:a,isLoading:e,first(){e()||t(1)},prev(){var s;const n=null===(s=a())||void 0===s?void 0:s.previousPage;!e()&&n&&t(n)},next(){var s;const n=null===(s=a())||void 0===s?void 0:s.nextPage;!e()&&n&&t(n)},last(){var s;const n=null===(s=a())||void 0===s?void 0:s.nbPages;!e()&&n&&t(n)}}},view(){const s=v(e("inbox")),o=function(t){const s=t.threads();return s&&s.currentPageResults?0===s.nbResults?a("div",{className:"emptyInbox"}," ",e("noNewMessages")," "):a("div",{className:"native_scroller inboxWrapper"},a("table",{className:"threadList"},a("tbody",null,s.currentPageResults.map(p)))):null}(this.ctrl),r=function(s){const o=s.threads();if(!o)return null;const r=o.currentPage>1,i=o.currentPage<o.nbPages;return a("div",{className:"inboxFooter"},a("div",{className:"navigationButtons"+(o.nbPages<=1?" invisible":"")},h("W",!s.isLoading()&&r,s.first),h("Y",!s.isLoading()&&r,s.prev),h("X",!s.isLoading()&&i,s.next),h("V",!s.isLoading()&&i,s.last)),a("div",{className:"actions_bar composeAction"},a("button",{className:"action_bar_button",oncreate:t((()=>n.set("/inbox/new")))},a("span",{className:"fa fa-pencil"}),e("composeMessage"))))}(this.ctrl);return g.free(s,o,r)}};export{N as default};

import{bG as t,b9 as e,p as s,C as a,o,b as r,ai as l,ba as i,aZ as n,u as c,ci as d,b6 as f,b2 as p}from"./main.js";import{S as m,g as y,i as u}from"./game-3e605d21.js";const g={wK:'<g viewBox="0 0 210 210"><defs><linearGradient id="lgw2"><stop style="stop-color: %237f7f7f; stop-opacity: 1;" offset="0"/><stop style="stop-color: %23ffffff; stop-opacity: 1;" offset="0.5"/><stop style="stop-color: %23ffffff; stop-opacity: 1;" offset="1"/></linearGradient></defs><path d="M 10,140 c 0,60 190,60 190,0 l 0,-35 l -190,0 z" style="fill: url(%23lgw2); stroke: rgb(0, 0, 0); stroke-width: 3; stroke-opacity: 0.65;"/><path d="M 10,105 c 0,60 190,60 190,0 l 0,-35 l -190,0 z" style="fill: url(%23lgw2) rgb(255, 255, 255); stroke: rgb(0, 0, 0); stroke-width: 3; stroke-opacity: 0.65;"/><path d="M 10,70 c 0,60 190,60 190,0 c 0,-60 -190,-60 -190,0 z" style="fill: rgb(255, 255, 255); stroke: rgb(0, 0, 0); stroke-width: 3; stroke-opacity: 0.65;"/><polygon points="58,45  71,85 139,85  152,45  127,70 105,35 83,70" fill="%23bf8c16"/><polygon points="74,96 71.6,87  138.4,87 136,96" fill="%23bf8c16"/><ellipse fill="%23FFFFFF" cx="105" cy="68" rx="5" ry="10"/></g>',bK:'<g viewBox="0 0 210 210"><defs><linearGradient id="lgb2"><stop style="stop-color: %23000000; stop-opacity: 1;" offset="0"/><stop style="stop-color: %23000000; stop-opacity: 1;" offset="0.5"/><stop style="stop-color: %239f9f9f; stop-opacity: 1;" offset="1"/></linearGradient></defs><path d="M 10,140 c 0,60 190,60 190,0 l 0,-35 l -190,0 z" style="fill: url(%23lgb2); stroke: %23dfdfdf; stroke-width: 3; stroke-opacity: 0.5;"/><path d="M 10,105 c 0,60 190,60 190,0 l 0,-35 l -190,0 z" style="fill: url(%23lgb2) rgb(0, 0, 0); stroke: %23dfdfdf; stroke-width: 3; stroke-opacity: 0.5;"/><path d="M 10,70 c 0,60 190,60 190,0 c 0,-60 -190,-60 -190,0 z" style="fill: rgb(0, 0, 0); stroke: %23dfdfdf; stroke-width: 3; stroke-opacity: 0.5;"/><polygon points="58,45  71,85 139,85  152,45  127,70 105,35 83,70" fill="%23bf8c16"/><polygon points="74,96 71.6,87  138.4,87 136,96" fill="%23bf8c16"/><ellipse fill="%23000000" cx="105" cy="68" rx="5" ry="10"/></g>',wM:'<g viewBox="0 0 210 210"><defs><linearGradient id="lgw1"><stop style="stop-color: %237f7f7f; stop-opacity: 1;" offset="0"/><stop style="stop-color: %23ffffff; stop-opacity: 1;" offset="0.5"/><stop style="stop-color: %23ffffff; stop-opacity: 1;" offset="1"/></linearGradient></defs><path d="M 10,140 c 0,60 190,60 190,0 l 0,-35 l -190,0 z" style="fill: url(%23lgw1); stroke: rgb(0, 0, 0); stroke-width: 3; stroke-opacity: 0.65;"/><path d="M 10,105 c 0,60 190,60 190,0 c 0,-60 -190,-60 -190,0 z" style="fill: rgb(255, 255, 255); stroke: rgb(0, 0, 0); stroke-width: 3; stroke-opacity: 0.65;"/></g>',bM:'<g viewBox="0 0 210 210"><defs><linearGradient id="lgb1"><stop style="stop-color: %23000000; stop-opacity: 1;" offset="0"/><stop style="stop-color: %23000000; stop-opacity: 1;" offset="0.5"/><stop style="stop-color: %239f9f9f; stop-opacity: 1;" offset="1"/></linearGradient></defs><path d="M 10,140 c 0,60 190,60 190,0 l 0,-35 l -190,0 z" style="fill: url(%23lgb1); stroke: %23dfdfdf; stroke-width: 3; stroke-opacity: 0.5;"/><path d="M 10,105 c 0,60 190,60 190,0 c 0,-60 -190,-60 -190,0" style="fill: rgb(0, 0, 0); stroke: %23dfdfdf; stroke-width: 3; stroke-opacity: 0.5;"/></g>'};function b(s,a,o){const r=t.read(s,o[0]*o[1]/2),l=Object.keys(r);let i='<svg xmlns="http://www.w3.org/2000/svg" width="360" height="360" viewBox="0 0 '+210*o[0]+" "+210*o[1]+'">';for(let t=0,s=l.length;t<s;t++){i+=k(h(w(e(l[t],o),a,o)),r[l[t]])}return i+="</svg>",i}function w(t,e,s){const a=s[0]/2+1,o=s[1]+1;return"white"===e?t:[a-t[0],o-t[1]]}function h(t){return[210*(2*t[0]-(t[1]%2!=0?1:2)),210*(t[1]-1)]}function k(t,e){const s=e.color[0]+e.role[0].toUpperCase();return'<svg x="'+t[0]+'" y="'+t[1]+'" width="210" height="210">'+g[s]+"</svg>"}var v={onbeforeupdate:({attrs:t},{attrs:e})=>t.g!==e.g,view({attrs:t}){const{g:e,index:d,userId:f,boardTheme:p}=t,g=m(e),w=e.rated?s("rated"):s("casual"),h="import"===e.source?`Import • ${e.variant.name}`:`${g} • ${e.variant.name} • ${w}`,k=y.toLabel(e.status.name,e.winner,e.variant.key)+(e.winner?("mate"!==e.status.name?". ":"")+s("white"===e.winner?"whiteIsVictorious":"blackIsVictorious")+".":""),v=u(e.variant.key),G=v?"import"===e.source?"/":a(e.perf)||"":"",x=e.players.white.user,M=f?x&&x.id===f?"white":"black":"white",z=d%2==0?"even":"odd",C=e.bookmarked?"t":"s",$=r.isConnected()?" withStar":"",j=e.players[M];return o("li",{"data-id":e.id,"data-pid":j.id,className:`list_item userGame ${z}${$}`},v?function(t,e,s,a){const r=i(s),l=["display_board",`board-${a}`,"is"+r.key].join(" ");return o("div",{className:l,oncreate:({dom:s})=>{n((()=>{const a=document.createElement("img");a.className="cg-board",a.src="data:image/svg+xml;utf8,"+b(t,e,r.size),n((()=>{const t=s.firstChild;t&&s.replaceChild(a,t)}))}))}},o("div",{className:"cg-board"}))}(e.fen,M,e.variant.key,p):function(t,e){const s=i("standard"),a=["display_board",`board-${e}`,"is"+s.key].join(" ");return o("div",{className:a,key:c,oncreate:({dom:e})=>{n((()=>{const a=document.createElement("img");a.className="cg-board",a.src="data:image/svg+xml;utf8,"+b(c,t,s.size),n((()=>{const t=e.firstChild;t&&e.replaceChild(a,t)}))}))}},o("div",{className:"cg-board"}))}(M,p),o("div",{className:"userGame-infos"},o("div",{className:"userGame-header"},o("div",{className:"userGame-iconWrapper"},o("span",{className:"variant-icon","data-icon":G}),o("div",{className:"userGame-titleWrapper"},o("p",{className:"userGame-title"},h),o("p",{className:"userGame-date"},e.date))),r.isConnected()?o("button",{className:"iconStar","data-icon":C}):null),o("div",{className:"userGame-versus"},o("div",{className:"game-result"},o("div",{className:"userGame-players"},N(e.players,"white"),o("div",{className:"swords","data-icon":"U"}),N(e.players,"black")),o("div",{className:l({"userGame-status":!0,win:!(!e.winner||M!==e.winner),loose:!(!e.winner||M===e.winner)})},k))),o("div",{className:"userGame-meta"},v?null:o("p",{className:"warning","data-icon":"j"},s("unsupportedVariant",e.variant.name)),e.opening?o("p",{className:"opening"},e.opening.name):null,e.tournament?o("p",{className:"tournament","data-id":e.tournament.id},o("span",{className:"fa fa-trophy"}),e.tournament.name):null,e.analysed?o("p",{className:"analysis"},o("span",{className:"fa fa-bar-chart"}),s("computerAnalysisAvailable")):null)))}};function N(t,e){const a=t[e];let r;return r=a.user?d(a.user):a.aiLevel?f({ai:a.aiLevel}):a.name?a.name:s("anonymous"),o("div",{className:"player "+e},o("span",{className:"playerName"},r),o("br",null),a.rating?o("small",{className:"playerRating"},a.rating):null,a.ratingDiff?p(a):null)}export{v as G};

import{r as e,ad as t,a6 as a,J as n,an as i,o,p as s,B as r,ay as m,s as l,I as u}from"./main.js";import{b as c,j as d,l as h}from"./teamsXhr-85950a27.js";import{l as f}from"./layout-26cca27d.js";class TeamCtrl{constructor(a){this.teamId=a,c(a).then((t=>{this.team=t,e()})).catch(t)}join(e){const n=this.team;if(!n)return null;const i=n.open?null:e[0].value;d(n.id,i).then((e=>{e.ok||a.show({text:"Join failed",duration:"short"}),this.reload(this.teamId)})).catch(t)}leave(){const e=this.team;if(!e)return null;h(e.id).then((e=>{e.ok||a.show({text:"Leave failed",duration:"short"}),this.reload(this.teamId)})).catch(t)}reload(a){c(a,!0).then((t=>{this.team=t,e()})).catch(t)}}function v(e){const t=e.patron?o("span.patron.userStatus",{"data-icon":"î€™"},[]):null;return o("div.user",[o("span",[r("teamLeaders",1)+": "]),t,m(e.title),e.name])}function p(e){const t=e.team;if(!t)return null;const a=t.open?null:o("textarea.joinMessage",{id:"message",minLength:30,maxLength:2e3},["Hello, I would like to join the team!"]);return o("div.teamJoinLeave",[o("form",{id:"joinForm",onsubmit:t=>{t.preventDefault(),e.join(t.target)}},[a,o("button.fatButton.joinLeaveButton",{type:"submit"},[o("span.fa.fa-check"),s("joinTeam")])])])}function b(e){return e.team?o("div.teamJoinLeave",[o("form",{id:"leaveForm",onsubmit:t=>{t.preventDefault(),e.leave()}},[o("button.fatButton.joinLeaveButton",{type:"submit"},[o("span.fa.fa-check"),s("quitTeam")])])]):null}var j={oninit({attrs:e}){l.createDefault(),this.ctrl=new TeamCtrl(e.id)},oncreate:u,view(){const e=this.ctrl,t=function(e){const t=e.team;return t?n(null,i(o("div.main_header_title.withSub",[o("h1",[t.name])]))):null}(e),a=function(e){const t=e.team;return t?o("div.teamPage.native_scroller.page",[o("section.teamInfos",[o("div.teamLeader",(t.leaders||[t.leader]).map(v)),o("div.teamMembers",[t.nbMembers+" "+s("members")]),o("div.teamDescription",[t.description])]),o("section.teamJoinLeave",[t.requested?o("div.teamRequestPending",[o("span",s("beingReviewed"))]):t.joined?b(e):p(e)])]):null}(e);return f.free(t,a,void 0)}};export{j as default};

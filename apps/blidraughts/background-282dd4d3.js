import{ch as e,r as s,J as t,an as r,p as a,e as o,K as n,H as i,o as l,a8 as g,cH as d,cI as c,cJ as h,cK as m}from"./main.js";import{l as u}from"./layout-26cca27d.js";let p;const f={oncreate:e,oninit(){this.loading=!1,this.progress=null,this.onProgress=e=>{e.lengthComputable&&(this.progress=e,s())},this.stopLoading=()=>{this.progress?(clearTimeout(p),p=setTimeout((()=>{this.loading=!1,this.progress=null,s()}),1500)):(this.loading=!1,this.progress=null,s())}},view(){const e=t(null,r(a("background")));return u.free(e,function(e){const t=o.general.theme.availableBackgroundThemes.filter((e=>{if("system"===e.key&&"android"===n.getPlatform()){const e=i(window.deviceInfo.osVersion);return e&&e>=10}return!0})),r=o.general.theme.background();return[l("div#bgThemes.native_scroller.page.settings_list.radio_list",{className:e.loading?"loading":""},[l("ul",t.map((t=>{const a=r===t.key;return l("li.list_item",[g.renderRadio(t.name,"bg_theme",t.key,a,(t=>{const r=t.target.value,a=o.general.theme.background();o.general.theme.background(r),new Promise((t=>{d(r)?(e.loading=!0,s(),c("bg",r,e.onProgress).then((()=>{e.stopLoading(),t(r)})).catch((s=>{o.general.theme.background(a),e.stopLoading(),h(),t(a)}))):(s(),t(r))})).then((e=>m(e)))}),e.loading),a&&e.progress?l("div.theme-progressBarContainer",[l("div.theme-progressBar",{style:{transform:`translateX(-${100-b(e.progress)}%)`}})]):null])})))])]}(this))}};function b(e){return e.loaded/e.total*100}export{f as default};

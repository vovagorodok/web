import{r as t,ad as a,e as r,I as s,s as e,H as i,b as n,aR as o,p as c}from"./main.js";import{l as d}from"./layout-26cca27d.js";import{a as u,b as f,n as h}from"./tournamentsListView-8232f8ea.js";import{a as m}from"./tournamentXhr-d3fb9e28.js";import"./TabView-6f41acb9.js";import"./game-3e605d21.js";class TournamentsListCtrl{constructor(r){this.onTabChange=a=>{const r=window.location.search.replace(/\?tab=\w+$/,"");try{window.history.replaceState(window.history.state,"",r+"?tab="+a)}catch(t){}this.currentTab=a,t()},this.currentTab=r||0,m().then((a=>{a.started=a.started.filter(l),a.created=a.created.filter(l),a.finished=a.finished.filter(l),a.started.sort(p),a.finished.sort(w),this.tournaments=a,t()})).catch(a)}}function l(t){return-1!==r.game.supportedVariants.indexOf(t.variant.key)}function p(t,a){return"lidraughts"===t.createdBy&&"lidraughts"===a.createdBy?t.startsAt-a.startsAt:"lidraughts"===t.createdBy?-1:1}function w(t,a){return a.finishesAt-t.finishesAt}var b={oncreate:s,oninit({attrs:t}){e.createDefault(),this.ctrl=new TournamentsListCtrl(i(t.tab))},view(){const t=this.ctrl,a=u(t),r=n.isConnected()?f():void 0,s=h.view(t);return d.free(o(c("tournaments")),a,r,s)}};export{b as default};

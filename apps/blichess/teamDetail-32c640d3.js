import{r as e,ac as t,a4 as a,H as n,am as i,o as s,p as o,z as r,s as l,G as m}from"./main.js";import{b as u,j as c,l as d}from"./teamsXhr-c875ec56.js";import{l as h}from"./layout-ae040024.js";class TeamCtrl{constructor(a){this.teamId=a,u(a).then((t=>{this.team=t,e()})).catch(t)}join(e){const n=this.team;if(!n)return null;const i=n.open?null:e[0].value;c(n.id,i).then((e=>{e.ok||a.show({text:"Join failed",duration:"short"}),this.reload(this.teamId)})).catch(t)}leave(){const e=this.team;if(!e)return null;d(e.id).then((e=>{e.ok||a.show({text:"Leave failed",duration:"short"}),this.reload(this.teamId)})).catch(t)}reload(a){u(a,!0).then((t=>{this.team=t,e()})).catch(t)}}function f(e){const t=e.patron?s("span.patron.userStatus",{"data-icon":"î€™"},[]):null,a=e.title?s("span.userTitle",[e.title+" "]):null;return s("div.user",[s("span",[r("teamLeaders",1)+": "]),t,a,e.name])}function v(e){const t=e.team;if(!t)return null;const a=t.open?null:s("textarea.joinMessage",{id:"message",minLength:30,maxLength:2e3},["Hello, I would like to join the team!"]);return s("div.teamJoinLeave",[s("form",{id:"joinForm",onsubmit:t=>{t.preventDefault(),e.join(t.target)}},[a,s("button.fatButton.joinLeaveButton",{type:"submit"},[s("span.fa.fa-check"),o("joinTeam")])])])}function p(e){return e.team?s("div.teamJoinLeave",[s("form",{id:"leaveForm",onsubmit:t=>{t.preventDefault(),e.leave()}},[s("button.fatButton.joinLeaveButton",{type:"submit"},[s("span.fa.fa-check"),o("quitTeam")])])]):null}var b={oninit({attrs:e}){l.createDefault(),this.ctrl=new TeamCtrl(e.id)},oncreate:m,view(){const e=this.ctrl,t=function(e){const t=e.team;return t?n(null,i(s("div.main_header_title.withSub",[s("h1",[t.name])]))):null}(e),a=function(e){const t=e.team;return t?s("div.teamPage.native_scroller.page",[s("section.teamInfos",[s("div.teamLeader",t.leaders.map(f)),s("div.teamMembers",[t.nbMembers+" "+o("members")]),s("div.teamDescription",[t.description])]),s("section.teamJoinLeave",[t.requested?s("div.teamRequestPending",[s("span",["Your join request is being reviewed by the team leader."])]):t.joined?p(e):v(e)])]):null}(e);return h.free(t,a,void 0)}};export{b as default};

import{r as t,o,g as e,K as n,y as r,n as a}from"./main.js";function i(t,o){const e=t.pieces.get(o);return e&&"pawn"===e.role&&("1"===o[1]&&"white"===t.turnColor||"8"===o[1]&&"black"===t.turnColor)}function s(t){if("offline_otb"===t.data.game.id){const o=t.chessground.state;if("white"===o.orientation&&"black"===t.player()||"black"===o.orientation&&"white"===t.player())return"rotate(180deg)"}return""}function c(t,i=a){if(!t.promoting)return null;const c=["queen","knight","rook","bishop"];return"antichess"===t.data.game.variant.key&&c.push("king"),o("div.overlay.open",{oncreate:r((()=>i(t)))},[o("div#promotion_choice",{className:e.general.theme.piece(),style:{top:(n().vh-100)/2+"px"}},c.map((e=>o("piece."+e+"."+t.player(),{style:{transform:s(t)},oncreate:r((()=>function(t,o){const e=t.promoting;e&&(t.chessground.promote(e.dest,o),e.callback(e.orig,e.dest,o)),t.promoting=null}(t,e)))}))))])}var l={canPromote:i,start:function(o,e,n,r){return!!i(o.chessground.state,n)&&(o.promoting={orig:e,dest:n,callback:r},t(),!0)},cancel:function(o,e){o.promoting&&(o.promoting=null,e&&o.chessground.set(e),t())},view:c};export{i as c,l as p,c as v};

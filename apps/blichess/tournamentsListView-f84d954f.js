import{a5 as e,m as a,o as t,p as n,a6 as s,g as i,az as r,aa as o,ac as l,y as u,S as m,aA as c,aB as d,aC as p,B as v,aD as f,E as b}from"./main.js";import{T as N,a as _}from"./TabView-408b9801.js";import{c as h}from"./tournamentXhr-291e93e6.js";let T=!1;var g={open:function(){a.backbutton.stack.push(k),T=!0},close:k,view:u=>e("tournament_form_popup",void 0,(()=>function(e){return t("form",{id:"tournamentCreateForm",class:"tournamentForm",onsubmit:e=>(e.preventDefault(),function(e){const t=e[0].elements,n=t[0].value,s=t[1].value,r="1"===i.tournament.variant()?t[2].value:"---",o=t[3].value,u=t[4].value,m=t[5].value,c=t[6].value,d=t[7].value,p=t[8].checked?t[8].value:"",v=p?t[9].value:"";h(n,s,r,o,u,m,c,d,p,v).then((e=>{k(),a.set("/tournament/"+e.id)})).catch(l)}(e.target))},t("fieldset",null,t("div",{className:"select_input no_arrow_after"},t("div",{className:"text_input_container"},t("label",null,n("name")," "),t("input",{type:"text",id:"name",className:"textField",autocomplete:"off",autocapitalize:"off",autocorrect:"off",spellcheck:!1}),"Arena")),t("div",{className:"tournament_name_warning"},n("safeTournamentName")," ",n("inappropriateNameWarning")," ",n("emptyTournamentName")),t("div",{className:"select_input"},s.renderSelect("Variant","variant",i.tournament.availableVariants,i.tournament.variant,!1)),void 0!==e.startPositions?t("div",{className:"select_input"+("1"!==i.tournament.variant()?" notVisible":"")},t("label",{for:"select_start_position"},"Position"),t("select",{id:"select_start_position",className:"positions"},t("option",{value:r},"Initial Position"),e.startPositions.map((e=>t("optgroup",{label:e.name},e.positions.map((e=>t("option",{value:e.fen},e.eco+" "+e.name)))))))):null,t("div",{className:"select_input"},s.renderSelect(n("mode"),"mode",i.tournament.availableModes,i.tournament.mode,!1)),t("div",{className:"select_input inline"},s.renderSelect(n("time"),"time",i.tournament.availableTimes,i.tournament.time,!1)),t("div",{className:"select_input inline no-margin"},s.renderSelect(n("increment"),"increment",i.tournament.availableIncrements.map((e=>o(Number(e)))),i.tournament.increment,!1)),t("div",{className:"select_input inline"},s.renderSelect(n("duration"),"duration",i.tournament.availableDurations.map((e=>o(Number(e)))),i.tournament.duration,!1)),t("div",{className:"select_input inline no-margin"},s.renderSelect("Time to Start","timeToStart",i.tournament.availableTimesToStart.map((e=>o(Number(e)))),i.tournament.timeToStart,!1)),t("div",{className:"select_input"},s.renderCheckbox(n("isPrivate"),"private",i.tournament.private)),t("div",{className:"select_input no_arrow_after"+(i.tournament.private()?"":" notVisible")},t("div",{className:"text_input_container"},t("label",null,"Password "),t("input",{type:"text",id:"password",className:"textField",autocomplete:"off",autocapitalize:"off",autocorrect:"off",spellcheck:!1})))),t("div",{className:"popupActionWrapper"},t("button",{className:"popupAction",type:"submit"},t("span",{className:"fa fa-check"}),n("createANewTournament"))))}(u)),T,k)};function k(e){"backbutton"!==e&&T&&a.backbutton.stack.pop(),T=!1}const w=[{label:"In Progress"},{label:"Upcoming"},{label:"Completed"}];function x(e){const t=b(e),n=null==t?void 0:t.dataset;n.id&&a.set("/tournament/"+n.id)}function S(e){if(!e.tournaments)return null;const a=[{id:"started",f:()=>e.tournaments?A(e.tournaments.started):null},{id:"created",f:()=>e.tournaments?A(e.tournaments.created):null},{id:"finished",f:()=>e.tournaments?A(e.tournaments.finished):null}];return[t("div.tabs-nav-header.subHeader",t(N,{buttons:w,selectedIndex:e.currentTab,onTabChange:e.onTabChange})),t(_,{selectedIndex:e.currentTab,tabs:a,onTabChange:e.onTabChange})]}function y(){return t("div",{className:"actions_bar"},t("button",{className:"action_create_button",oncreate:u(g.open)},t("span",{className:"fa fa-plus-circle"}),n("createANewTournament")))}function A(e){return t("ul.native_scroller.tournamentList",{oncreate:m(x,void 0,b)},e.map(C))}function C(e,a){const s=c(e.clock),i=e.rated?n("rated"):n("casual"),r=d(e.minutes),o="standard"!==e.variant.key?p(e.variant.short):"",l=a%2==0?" even ":" odd ",u=function(e){let a="";a=e.battle?"teamBattle":"lichess"!==e.createdBy?"user":e.hasMaxRating?"maxRating":e.schedule?e.schedule.freq:"";return a}(e);return t("li",{key:e.id,className:"list_item tournament_item"+l+u,"data-id":e.id},t("i",{className:"tournamentListIcon","data-icon":P(e)}),t("div",{className:"tournamentListName"},t("div",{className:"fullName"},e.fullName),t("small",{className:"infos"},s," ",o," ",i," â€¢ ",r)),t("div",{className:"tournamentListTime"},t("div",{className:"time"},I(e.startsAt)," ",t("strong",{className:"timeArrow"},"-")," ",I(e.finishesAt)),t("small",{className:"nbUsers withIcon","data-icon":"r"},e.nbPlayers)))}function P(e){var a;return"shield"===(null===(a=e.schedule)||void 0===a?void 0:a.freq)?"5":v(e.perf.key)}function I(e){const a=new Date(e);return f(a.getHours(),2)+":"+f(a.getMinutes(),2)}export{S as a,y as b,g as n,A as r};

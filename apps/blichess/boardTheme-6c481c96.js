import{c8 as e,r as a,cz as s,u as l,ag as o,o as i,g as t,m as n,p as r,cA as d,a9 as c,P as h,cB as g,cw as u,cx as m}from"./main.js";import{l as f}from"./layout-b3635a82.js";const b=t.general.theme;let p;var k={oncreate:e,oninit(){this.loading=!1,this.progress=null,this.selected=b.board(),this.onProgress=e=>{e.lengthComputable&&(this.progress=e,a())},this.stopLoading=()=>{this.progress?(clearTimeout(p),p=setTimeout((()=>{this.loading=!1,this.progress=null,a()}),1500)):(this.loading=!1,this.progress=null,a())},this.isLocal=({key:e,filename:a})=>b.bundledBoardThemes.includes(e)||Boolean(this.localFiles&&this.localFiles["board-"+a]),s("board").then((e=>{this.localFiles=e.reduce(((e,a)=>Object.assign({[a]:"1"},e)),{}),a()}))},view(){const e=l(null,o(i("boardTheme")));return f.free(e,function(e){function s(s){if(e.loading)return;const l=h(s),o=l&&l.dataset.key,i=l&&l.dataset.filename;if(o&&i){const s=e.selected;e.selected=o,b.bundledBoardThemes.includes(o)?(b.board(o),g(o)):(e.loading=!0,u("board",o,e.onProgress).then((()=>{b.board(o),g(o),e.localFiles&&(e.localFiles["board-"+i]="1"),e.stopLoading()})).catch((a=>{e.selected=s,e.stopLoading(),m()}))),a()}}return[n("div.native_scroller.page.settings_list",[n("ul",{oncreate:r(s,void 0,h)},b.availableBoardThemes.map((a=>{const s=a.key===e.selected,l=d(a),o=e.loading&&s;return n("li.list_item.board_theme",{className:c({selected:s,loading:s&&!!e.loading}),"data-key":a.key,"data-filename":l},[n("span.name",a.name),o||e.isLocal({key:a.key,filename:l})?null:n("i.fa.fa-cloud-download"),o?n("i.fa.fa-circle-o-notch.fa-spin"):null,!e.loading&&s?n("i.fa.fa-check"):null,n("div.board_thumbnail.vertical_align",{className:a.key})])})))])]}(this))}};export{k as default};

import{as as t,at as e,m as s}from"./main.js";var i={oninit({attrs:s}){this.rang=!1,this.seconds=s.seconds,this.render=e=>{if(this.el){const i=t(e,s.showOnlySecs?"secs_only":void 0);s.textWrap?this.el.innerHTML=s.textWrap(e,i):this.el.textContent=i}},this.tick=()=>{const t=performance.now(),i=Math.round((t-this.clockTime)/1e3);this.clockTime=t;const o=this.seconds-i,c=o>0?o:0;this.render(c),void 0!==s.emergTime&&!this.rang&&c<s.emergTime&&(this.el&&this.el.classList.add("emerg"),e.lowtime(),this.rang=!0),c<=0?clearTimeout(this.clockTimeoutId):(this.seconds=c,this.clockTimeoutId=setTimeout(this.tick,1e3))}},oncreate({attrs:t,dom:e}){this.el=e,this.seconds=t.seconds,this.render(this.seconds),this.clockTime=performance.now(),this.clockTimeoutId=setTimeout(this.tick,1e3)},onupdate({dom:t}){this.el=t},onremove(){clearTimeout(this.clockTimeoutId)},view:()=>s("div.countdown-timer")};export{i as C};

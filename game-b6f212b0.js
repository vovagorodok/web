import{p as e,aT as t,aG as n,g as r,b2 as a,z as s}from"./main.js";import{s as i}from"./perfs-d8ca398c.js";const o={created:10,started:20,aborted:25,mate:30,resign:31,stalemate:32,timeout:33,draw:34,outoftime:35,cheat:36,noStart:37,unknownFinish:38,variantEnd:60};var c={ids:o,started:function(e){return e.game.status.id>=o.started},finished:function(e){return e.game.status.id>=o.mate},aborted:function(e){return e.game.status.id===o.aborted},resigned:function(e){return e.game.status.id===o.resign},toLabel:function(t,n,r,a){switch(t){case"started":return e("playingRightNow");case"aborted":return e("gameAborted");case"mate":return e("checkmate");case"resign":return e("white"===r?"blackResigned":"whiteResigned");case"stalemate":return e("stalemate");case"timeout":switch(r){case"white":return e("blackLeftTheGame");case"black":return e("whiteLeftTheGame");default:return e("draw")}case"draw":return e("draw");case"outoftime":return`${e(n%2==0?"whiteTimeOut":"blackTimeOut")}${r?"":` • ${e("draw")}`}`;case"noStart":return("white"===r?"Black":"White")+" didn't move";case"unknownFinish":return e("finished");case"cheat":return"Cheat detected";case"variantEnd":switch(a){case"kingOfTheHill":return"King in the center";case"threeCheck":return"Three checks";default:return"Variant ending"}default:return t}}};function u(e){return!e||0===e.length}function f(e){return((e=Math.max(Math.min(Math.round(e/10)/10,99),-99))>0?"+":"")+e}function d(e){const t=e.server,n=e.client;return t?n&&(n.nodes>4e6||void 0!==n.mate&&(void 0===t.mate||Math.abs(n.mate)<Math.abs(t.mate)))?n:t:n}function m(e){return"synthetic"===e.game.id}function h(e){e&&requestAnimationFrame((()=>{const t=e.querySelector(".current");e.scrollTop=t?t.offsetTop-e.offsetHeight/2+t.offsetHeight/2:0}))}function l(e){return Math.floor((e-1)/2)+1}function p(e){return e.san?l(e.ply)+(e.ply%2==1?".":"...")+" "+t(e.san):"Initial position"}function g(e,t){return function(e){return e.split(/\s/)[0].split(/[nbrqkp]/i).length-1}(t)<=function(e){switch(e){case"standard":case"fromPosition":case"chess960":return 7;case"atomic":case"antichess":return 6;default:return 0}}(e)}function k(e){return void 0!==e}function w(e){return e%2==0?"white":"black"}function b(e,t){return e.depth>t.depth||e.depth===t.depth&&e.nodes>t.nodes}const y=["standard","crazyhouse","chess960","fromPosition","kingOfTheHill","threeCheck","atomic","antichess","horde","racingKings"];function v(e){if(!e)return{};const t={};if("string"==typeof e)e.split(" ").forEach((e=>{t[e.slice(0,2)]=e.slice(2).match(/.{2}/g)}));else for(const n in e)t[n]=e[n].match(/.{2}/g);return t}function T(e){return"import"!==e.game.source&&e.game.status.id<c.ids.aborted}function M(e){return T(e)&&!e.player.spectator}function x(e){return M(e)&&e.game.player===e.player.color}function G(e){return!!e.tournament}function O(e){return e.game.turns-(e.game.startedAtTurn||0)}function $(e){return T(e)&&!function(e){return O(e)>1}(e)&&!G(e)}function H(e){return!(!(T(e)&&e.takebackable&&!e.tournament&&O(e)>1)||e.player.proposingTakeback||e.opponent.proposingTakeback)}function S(e){return T(e)&&e.game.turns>=2&&!e.player.offeringDraw&&!e.opponent.ai&&!e.opponent.offeringDraw}function q(e){return e.tournament&&e.tournament.berserkable&&M(e)&&O(e)<2}function A(e){return T(e)&&!$(e)}function C(e){return!e.opponent.ai&&e.clock&&e.opponent.isGone&&A(e)}function D(e){return e.clock&&M(e)&&!G(e)}function E(e){return function(e){return"import"===e.game.source}(e)||c.finished(e)}function F(e){return-1!==r.analyse.supportedVariants.indexOf(e.game.variant.key)&&T(e)&&(!e.clock||!M(e))}function L(e){return E(e)&&O(e)>4&&-1!==y.indexOf(e.game.variant.key)}function N(e,t){return e.player.color===t?e.player:e.opponent.color===t?e.opponent:void 0}function j(e,t,n){const r=N(e,t);r&&(n=n&&!r.ai,r.isGone=n,!n&&r.user&&(r.user.online=!0))}function z(e,t,n){const r=N(e,t);r&&(n=n||!!r.ai,r.onGame=n,n&&j(e,t,!1))}function I(e,t){return Math.floor((e.game.turns+("white"===t?1:0))/2)}function K(e){if(c.finished(e))switch(e.game.winner){case"white":return"1-0";case"black":return"0-1";default:return"½-½"}return"*"}function P(e){if(e.clock){const t=a(e.clock.initial);return(.25===t?"¼":.5===t?"½":.75===t?"¾":t.toString())+"+"+e.clock.increment}return e.correspondence?s("nbDays",e.correspondence.daysPerTurn):"∞"}function R(t){const r=t.game.offline?e("offline"):t.game.rated?e("rated"):e("casual"),a=t.game.perf&&i(t.game.perf),s=n(t.game.variant.key),o=a||(s?s.tinyName||s.shortName||s.name:"?"),c=P(t);return"import"===t.game.source?"Import • Standard":`${c} • ${o} • ${r}`}function V(e){return"https://lichess.org/"+e.game.id}function B(e){return"https://lichess.org/"+e.game.id+"/"+e.orientation}function J(e){return`https://lichess1.org/game/export/gif/${e.game.id}.gif`}function W(e){return-1!==r.game.supportedVariants.indexOf(e.game.variant.key)}function Q(e){return T(e)&&!m(e)&&"correspondence"===e.game.speed}export{L as A,f as B,d as C,p as D,u as E,l as F,g as G,k as H,m as I,h as J,b as K,y as L,w as M,P as N,E as a,q as b,T as c,Q as d,$ as e,C as f,c as g,H as h,x as i,K as j,N as k,M as l,D as m,W as n,I as o,V as p,v as q,A as r,O as s,R as t,F as u,j as v,z as w,S as x,B as y,J as z};

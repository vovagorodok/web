import{r as t,ac as s,cm as a,g as e,G as r,s as i,F as n,b as o,aN as c,p as h}from"./main.js";import{l as d}from"./layout-ae040024.js";import{a as f,b as u,n as l}from"./tournamentsListView-f84d954f.js";import{a as m}from"./tournamentXhr-291e93e6.js";import"./TabView-408b9801.js";class TournamentsListCtrl{constructor(e){this.onTabChange=s=>{const a=window.location.search.replace(/\?tab=\w+$/,"");try{window.history.replaceState(window.history.state,"",a+"?tab="+s)}catch(t){}this.currentTab=s,t()},this.currentTab=e||0,m().then((s=>{s.started=s.started.filter(p),s.created=s.created.filter(p),s.finished=s.finished.filter(p),s.started.sort(w),s.finished.sort(b),this.tournaments=s,t()})).catch(s),a("data/positions.json").then((s=>{this.startPositions=s,t()}))}}function p(t){return-1!==e.game.supportedVariants.indexOf(t.variant.key)}function w(t,s){return"lichess"===t.createdBy&&"lichess"===s.createdBy?t.startsAt-s.startsAt:"lichess"===t.createdBy?-1:1}function b(t,s){return s.finishesAt-t.finishesAt}var y={oncreate:r,oninit({attrs:t}){i.createDefault(),this.ctrl=new TournamentsListCtrl(n(t.tab))},view(){const t=this.ctrl,s=f(t),a=o.isConnected()?u():void 0,e=l.view(t);return d.free(c(h("tournaments")),s,a,e)}};export{y as default};

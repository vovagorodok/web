import{cf as e,r as a,cG as s,H as l,am as o,p as i,g as t,o as n,q as r,cH as d,ah as c,E as h,cI as g,cD as m,cE as u}from"./main.js";import{l as f}from"./layout-ae040024.js";const p=t.general.theme;let b;var k={oncreate:e,oninit(){this.loading=!1,this.progress=null,this.selected=p.board(),this.onProgress=e=>{e.lengthComputable&&(this.progress=e,a())},this.stopLoading=()=>{this.progress?(clearTimeout(b),b=setTimeout((()=>{this.loading=!1,this.progress=null,a()}),1500)):(this.loading=!1,this.progress=null,a())},this.isLocal=({key:e,filename:a})=>p.bundledBoardThemes.includes(e)||Boolean(this.localFiles&&this.localFiles["board-"+a]),s("board").then((e=>{this.localFiles=e.reduce(((e,a)=>Object.assign({[a]:"1"},e)),{}),a()}))},view(){const e=l(null,o(i("boardTheme")));return f.free(e,function(e){function s(s){if(e.loading)return;const l=h(s),o=l&&l.dataset.key,i=l&&l.dataset.filename;if(o&&i){const s=e.selected;e.selected=o,p.bundledBoardThemes.includes(o)?(p.board(o),g(o)):(e.loading=!0,m("board",o,e.onProgress).then((()=>{p.board(o),g(o),e.localFiles&&(e.localFiles["board-"+i]="1"),e.stopLoading()})).catch((a=>{e.selected=s,e.stopLoading(),u()}))),a()}}return[n("div.native_scroller.page.settings_list",[n("ul",{oncreate:r(s,void 0,h)},p.availableBoardThemes.map((a=>{const s=a.key===e.selected,l=d(a),o=e.loading&&s;return n("li.list_item.board_theme",{className:c({selected:s,loading:s&&!!e.loading}),"data-key":a.key,"data-filename":l},[n("span.name",a.name),o||e.isLocal({key:a.key,filename:l})?null:n("i.fa.fa-cloud-download"),o?n("i.fa.fa-circle-o-notch.fa-spin"):null,!e.loading&&s?n("i.fa.fa-check"):null,n("div.board_thumbnail.vertical_align",{className:a.key})])})))])]}(this))}};export{k as default};
